<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D√®leite Saludable - App Pedidos con GPS</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primario: #bc7c4c;
            --secundario: #f4a261;
            --fondo: #fdfaf5;
            --texto: #4a3f35;
            --whatsapp: #25d366;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: var(--fondo);
            color: var(--texto);
            margin: 0;
            padding-bottom: 240px;
        }

        header {
            background: white;
            text-align: center;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .logo { width: 80px; border-radius: 50%; }

        .container { padding: 15px; max-width: 600px; margin: auto; }

        .form-cliente {
            background: #fff;
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 20px;
            border: 1px solid #eee;
        }

        .form-cliente input, .form-cliente textarea {
            width: 100%;
            padding: 12px;
            margin: 8px 0;
            border: 1px solid #ddd;
            border-radius: 10px;
            box-sizing: border-box;
        }

        .btn-gps {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px;
            width: 100%;
            border-radius: 10px;
            cursor: pointer;
            margin-bottom: 10px;
            font-weight: bold;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
        }

        h3 { 
            background: var(--primario); 
            color: white; 
            padding: 12px 15px; 
            border-radius: 10px;
            margin-top: 30px;
            font-size: 1.1rem;
        }

        .producto {
            background: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .info-prod { max-width: 65%; }
        .desc-prod { font-size: 0.75rem; color: #777; display: block; margin-top: 4px; }

        .controles { display: flex; align-items: center; gap: 10px; }

        .btn-qty {
            background: var(--secundario);
            color: white;
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 8px;
            cursor: pointer;
        }

        .cantidad { font-weight: bold; min-width: 20px; text-align: center; }

        .carrito-footer {
            position: fixed;
            bottom: 0;
            width: 100%;
            background: white;
            padding: 20px;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.15);
            border-radius: 25px 25px 0 0;
            box-sizing: border-box;
            max-width: 600px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
        }

        .total-fila {
            display: flex;
            justify-content: space-between;
            font-size: 1.4rem;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .btn-enviar {
            background: var(--whatsapp);
            color: white;
            border: none;
            width: 100%;
            padding: 18px;
            border-radius: 15px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }

        .derechos {
            text-align: center;
            font-size: 0.7rem;
            margin-top: 15px;
            color: #aaa;
        }
    </style>
</head>
<body>

<header>
    <img src="deleite-saludable.PNG" alt="Logo D√®leite" class="logo">
    <h2 style="margin:5px 0 0 0;">D√®leite Saludable</h2>
    <small>Caucasia, Antioquia | 321 491 4775</small>
    <div id="reloj-colombia" style="font-size: 0.8rem; font-weight: bold; margin-top: 5px; color: var(--primario);"></div>
</header>

<div class="container">
    <div class="form-cliente">
        <h3>Datos de Entrega</h3>
        <input type="text" id="nombre" placeholder="Nombre completo">
        <input type="tel" id="telefono" placeholder="Celular de contacto">
        <input type="text" id="direccion" placeholder="Direcci√≥n manual (Barrio/Casa)">
        
        <button class="btn-gps" onclick="obtenerUbicacion()">
            <i class="fas fa-map-marker-alt"></i> Compartir mi Ubicaci√≥n GPS
        </button>
        <div id="status-gps" style="font-size: 0.8rem; text-align: center; color: #27ae60;"></div>

        <textarea id="observaciones" rows="2" placeholder="Notas (Ej: San Valent√≠n, sin cebolla...)"></textarea>
    </div>

    <div id="menu-completo"></div>
</div>

<div class="carrito-footer">
    <div class="total-fila">
        <span>Total:</span>
        <span id="monto-total">$0</span>
    </div>
    <button class="btn-enviar" onclick="enviarPedido()">
        <i class="fab fa-whatsapp"></i> ENVIAR PEDIDO POR WHATSAPP
    </button>
    <div class="derechos">
        APP DESARROLLADA POR <b>VIBRAS POSITIVAS</b> ¬© 2026<br>
        DERECHOS DE AUTOR RESERVADOS
    </div>
</div>

<script>
    let ubicacionGPS = "";

    const menu = {
        "Desayunos": [
            { n: "Desayuno Sencillo", p: 16000, d: "Arepa, quesito, fruta y huevos al gusto, pan tajado" },
            { n: "Bowl Coste√±o", p: 24000, d: "Pl√°tano verde, hogao, chicharr√≥n, huevos y queso coste√±o" },
            { n: "Huevos Benedectinos", p: 23000, d: "Tostadas, huevo pochados, aguacate, tocineta" },
            { n: "Sanduche de Huevo", p: 16000, d: "Huevos revueltos, queso crema, tocineta y pan de or√©gano" },
            { n: "S√°ndwich gratinado de pollo", p: 20000, d: "Pollo en salsa, mozzarella y parmesano" },
            { n: "Desayuno con patacones", p: 19000, d: "Patacones, huevo revuelto, chicharr√≥n y hogao" }
        ],
        "Almuerzos & Platos Fuertes": [
            { n: "Salm√≥n Deleite al ajillo", p: 47000, d: "A las finas hierbas con vegetales y papas" },
            { n: "Chuzo de solomito", p: 32000, d: "Carne solomito, papas francesa y ensalada" },
            { n: "Picadas deleite", p: 50000, d: "Res, pollo, cerdo, chicharr√≥n, chorizo y yuca" },
            { n: "Punta de anca al carb√≥n", p: 45000, d: "250g con papas y ensalada" },
            { n: "Pechuga de pollo 250g", p: 29000, d: "Acompa√±ado de papas francesa y ensalada" }
        ],
        "Postres & Dulces": [
            { n: "Torta Red Velvet", p: 18000, d: "Harina de avena y almendras (San Valent√≠n)" },
            { n: "Torta Chocolate", p: 18000, d: "Con ganache de chocolate" },
            { n: "Wafles con frutas", p: 19000, d: "Con yogurt griego o helado" }
        ],
        "Bebidas": [
            { n: "Limonada de Coco", p: 12000, d: "Cremosa y refrescante" },
            { n: "Copa de Vino de Corozo", p: 18000, d: "Especial San Valent√≠n" },
            { n: "Jugo verde", p: 15000, d: "Detox saludable" }
        ]
    };

    let carrito = {};

    function init() {
        const menuDiv = document.getElementById('menu-completo');
        for (let cat in menu) {
            const h3 = document.createElement('h3');
            h3.innerText = cat;
            menuDiv.appendChild(h3);
            menu[cat].forEach((p, idx) => {
                const id = cat.substring(0,2) + idx;
                const div = document.createElement('div');
                div.className = 'producto';
                div.innerHTML = `
                    <div class="info-prod">
                        <strong>${p.n}</strong>
                        <span class="desc-prod">${p.d}</span>
                        <span style="color:var(--primario); font-weight:bold;">$${p.p.toLocaleString()}</span>
                    </div>
                    <div class="controles">
                        <button class="btn-qty" onclick="cambiarCantidad('${id}', -1, ${p.p}, '${p.n}')">-</button>
                        <span class="cantidad" id="qty-${id}">0</span>
                        <button class="btn-qty" onclick="cambiarCantidad('${id}', 1, ${p.p}, '${p.n}')">+</button>
                    </div>
                `;
                menuDiv.appendChild(div);
            });
        }
    }

    function obtenerUbicacion() {
        if (navigator.geolocation) {
            document.getElementById('status-gps').innerText = "üìç Localizando...";
            navigator.geolocation.getCurrentPosition((pos) => {
                ubicacionGPS = `https://www.google.com/maps?q=${pos.coords.latitude},${pos.coords.longitude}`;
                document.getElementById('status-gps').innerText = "‚úÖ Ubicaci√≥n fijada con √©xito";
            }, () => {
                alert("No pudimos obtener tu GPS. Por favor escribe tu direcci√≥n manual.");
                document.getElementById('status-gps').innerText = "‚ùå GPS no disponible";
            });
        }
    }

    function cambiarCantidad(id, c, p, n) {
        if (!carrito[id]) carrito[id] = { q: 0, p: p, n: n };
        carrito[id].q += c;
        if (carrito[id].q < 0) carrito[id].q = 0;
        document.getElementById(`qty-${id}`).innerText = carrito[id].q;
        updateTotal();
    }

    function updateTotal() {
        let t = 0;
        for (let i in carrito) t += carrito[i].q * carrito[i].p;
        document.getElementById('monto-total').innerText = `$${t.toLocaleString('es-CO')}`;
    }

    function actualizarReloj() {
        const opt = { timeZone: 'America/Bogota', hour: '2-digit', minute: '2-digit', hour12: true };
        document.getElementById('reloj-colombia').innerHTML = `COLOMBIA: ${new Date().toLocaleTimeString('es-CO', opt)}`;
    }
    setInterval(actualizarReloj, 1000); actualizarReloj();

    function enviarPedido() {
        const nom = document.getElementById('nombre').value;
        const dir = document.getElementById('direccion').value;
        const tel = document.getElementById('telefono').value;
        const obs = document.getElementById('observaciones').value;

        if (!nom || !tel) return alert("‚ö†Ô∏è Completa tu nombre y celular.");
        
        let t = 0, l = "";
        for (let i in carrito) {
            if (carrito[i].q > 0) {
                let sub = carrito[i].q * carrito[i].p;
                t += sub;
                l += `‚úÖ *${carrito[i].q}x* ${carrito[i].n} ($${sub.toLocaleString()})\n`;
            }
        }
        if (t === 0) return alert("‚ö†Ô∏è Agrega productos al pedido.");

        let msg = `üßæ *ORDEN D√àLEITE SALUDABLE*\n`;
        msg += `üë§ *Cliente:* ${nom}\nüìû *Tel:* ${tel}\n`;
        msg += `üìç *Direcci√≥n:* ${dir || "Ver GPS abajo"}\n`;
        if (ubicacionGPS) msg += `üåç *Ubicaci√≥n GPS:* ${ubicacionGPS}\n`;
        msg += `----------------------------------\n${l}`;
        msg += `----------------------------------\nüìù *Notas:* ${obs || "Ninguna"}\n`;
        msg += `üí∞ *TOTAL: $${t.toLocaleString()}*\n\n`;
        msg += `_Desarrollado por Vibras Positivas ¬©_`;

        window.open(`https://wa.me/573214914775?text=${encodeURIComponent(msg)}`, '_blank');
    }
    init();
</script>
</body>
</html>
